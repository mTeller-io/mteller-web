@inherits LayoutComponentBase
<MudThemeProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    
    <MudAppBar Color="Color.Warning" Fixed="false">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" />
        mTeller
        <MudSpacer />
        <MudToggleIconButton Icon="@Icons.Material.Filled.Logout" Color="@Color.Error" Title="SignOut"
                             ToggledIcon="@Icons.Material.Filled.Login" ToggledColor="@Color.Success" ToggledTitle="SignIn" ToggledChanged="SignIn" />
        <span>@(LogOn ? "Sign Out" : "Sign In")</span>
        <MudIconButton Icon="@Icons.Material.Filled.MoreVert" Color="Color.Inherit" Edge="Edge.End" />
    </MudAppBar>
    <MudDrawer @bind-Open="@_drawerOpen">
        <MudNavMenu Class="mud-width-full">
            <MudText Typo="Typo.h6" Color="Color.Info" Class="px-4">Menu</MudText>
            <MudText Typo="Typo.body2" Color="Color.Info" Class="px-4 mud-text-secondary">...</MudText>
            <MudDivider Class="my-2" />

            <MudNavGroup Title="Products" Icon="@Icons.Filled.Album" IconColor="Color.Warning" Expanded="false">
                <MudNavLink Href="/cashin" Icon="@Icons.Filled.AttachMoney" IconColor="Color.Info">Cash-In</MudNavLink>
                <MudNavLink Href="/cashout" Icon="@Icons.Filled.MoneyOff" IconColor="Color.Info">Cash-Out</MudNavLink>
            </MudNavGroup>
            <MudNavGroup Title="Use Cases" Icon="@Icons.Filled.Nat" IconColor="Color.Warning" Expanded="false">
                <MudNavLink Href="#" Icon="@Icons.Filled.BusinessCenter" IconColor="Color.Secondary">E-Commerce</MudNavLink>
                <MudNavLink Href="#" Icon="@Icons.Filled.Business" IconColor="Color.Secondary">MarketPlaces</MudNavLink>
                <MudNavLink Href="#" Icon="@Icons.Filled.House" IconColor="Color.Secondary">Institutions</MudNavLink>
                <MudNavLink Href="#" Icon="@Icons.Filled.NaturePeople" IconColor="Color.Secondary">Individuals</MudNavLink>
            </MudNavGroup>
            <MudNavGroup Title="Developers" Icon="@Icons.Filled.DeveloperMode" IconColor="Color.Warning" Expanded="false">
                <MudNavLink Href="#" Icon="@Icons.Filled.Book" IconColor="Color.Tertiary">Documentation</MudNavLink>
                <MudNavLink Href="#" Icon="@Icons.Filled.Api" IconColor="Color.Tertiary">API Reference</MudNavLink>
            </MudNavGroup>
            <MudNavGroup Title="Companies" Icon="@Icons.Filled.LocalPostOffice" IconColor="Color.Warning" Expanded="false">
                <MudNavLink Href="#" Icon="@Icons.Filled.Business" IconColor="Color.Success">Business A</MudNavLink>
                <MudNavLink Href="#" Icon="@Icons.Filled.BusinessCenter" IconColor="Color.Success">Business B</MudNavLink>
            </MudNavGroup>
            <MudNavGroup Title="Register" Icon="@Icons.Filled.Settings" IconColor="Color.Warning" Expanded="true">
                <MudNavLink Href="/signup" Icon="@Icons.Rounded.People" IconColor="Color.Success">Sign Up</MudNavLink>
                <MudNavLink Href="/signin" Icon="@Icons.Rounded.People" IconColor="Color.Success">Sign In</MudNavLink>
                <MudNavLink Href="#" Icon="@Icons.Rounded.Security" IconColor="Color.Info">Security</MudNavLink>
            </MudNavGroup>
        </MudNavMenu>
    </MudDrawer>
    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.Medium">
            @Body
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code {

    [Inject]
    NavigationManager NavigationManager { get; set; }
    public bool LogOn { get; set; } = false;
    public void SignIn()
    {
        var SignInSuccess = true;
        if (SignInSuccess)
        {
            LogOn = true;
            NavigationManager.NavigateTo("/signin");
        }
    }
}


@code {
    bool _drawerOpen = true;

    void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }
}
